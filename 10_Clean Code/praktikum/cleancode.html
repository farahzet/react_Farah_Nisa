<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CreateProduct</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" type="text/css" href="bootstrap-st.css">
  </head>
  <body>
    <header>
      <div id="header_left">
        <h4>Simple Header</h4>
      </div>
      <div id="header_right">
        <ul class="nav nav-pills">
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="#">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Features</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Pricing</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">FAQs</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">About</a>
          </li>
        </ul>
      </div>
    </header>
    <main>
      <section class="content">
        <div class="d-grid gap-2 col-4 mx-auto">
          <img src="Bootstrap_logo.png" alt="Bootstrap" width="60" height="50" style="margin-left: 200px;">
          <h2 style="margin-left: 130px;">Create Product</h2>
          <p>Below is an example form built entirely with Bootstrapâ€™s form controls. Each required form group has a validation state that can be triggered by attempting to submit the form without completing it.</p>
          <h3>Detail Product</h3>
        </div>
        <form id="productForm" class="needs-validation" novalidate>
          <div class="d-grid gap-2 col-4 mx-auto">
            <label for="formGroupExampleInput" class="form-label">Product Name</label>
            <input type="text" class="form-control" id="Productname" name="Productname" required>
            <p id="errorMessage" style="color: red;"></p>
          </div>
          <div class="d-grid gap-2 col-4 mx-auto">
            <label for="inputState" class="form-label">Category Product</label>
            <select class="form-select" aria-label="Default select example" id="categoryProduct" name="Category" required>
              <option selected>Choose</option>
              <option value="Clothes">Clothes</option>
              <option value="T-Shirt">T-Shirt</option>
              <option value="Skirt">Skirt</option>
            </select>
            <div class="invalid-feedback"> Please select the product </div>
          </div>
          <div class="d-grid gap-2 col-4 mx-auto">
            <label for="inputState" class="form-label">Image of Product</label>
            <input type="file" class="form-control" id="imageproduct" name="Image" required>
            <div class="invalid-feedback">Upload file</div>
          </div>
          <div class="d-grid gap-2 col-4 mx-auto">
            <label for="inputState" class="form-label" id="productFreshness">Product Freshness</label>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1" value="BrandNew" required>
              <label class="form-check-label" for="flexRadioDefault1"> Brand New </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" value="Secondhank" required>
              <label class="form-check-label" for="flexRadioDefault2"> Second Hank </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault3" value="Refurbished" required>
              <label class="form-check-label" for="flexRadioDefault3"> Refurbished </label>
            </div>
            <div class="invalid-feedback"> Please fill the product </div>
          </div>
          <div class="d-grid gap-2 col-4 mx-auto">
            <label for="inputState" class="form-label">Additional Description</label>
            <textarea class="form-control" aria-label="With textarea" name="Additional" id="decs" required></textarea>
            <div class="invalid-feedback"> Please enter a message in the textarea </div>
          </div>
          <div class="d-grid gap-2 col-4 mx-auto">
            <label for="formGroupExampleInput" class="form-label">Product Price</label>
            <input type="text" class="form-control" id="price" placeholder="$100" name="price" required>
            <div class="invalid-feedback">Product price cannot be empty </div>
          </div>
          <div class="invalid-feedback"> Please fill the product </div>
          <br>
          <div class="d-grid gap-2 col-4 mx-auto">
            <button type="submit" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" id="btn_submit"> Submit </button>
            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Alert</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body" id="alertMessage"> Field cannot be empty </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
        <div class="ListTable">
          <table class="table table-bordered table-striped table-hover" id="CreateProduct">
            <thead>
              <tr style="text-align: center;">
                <th scope="col">No</th>
                <th scope="col">Product Name</th>
                <th scope="col">Category Product</th>
                <th scope="col">Image of Product</th>
                <th scope="col">Additional Description</th>
                <th scope="col">Product Price</th>
              </tr>
            </thead>
            <tbody id="productTableBody"></tbody>
          </table>
        </div>
      </section>
    </main>
  </body>
  <script type="text/javascript">
        (() => {
        'use strict'

        const forms = document.querySelectorAll('.needs-validation')
        Array.from(forms).forEach(form => {
            form.addEventListener("submit", e => {
                if (!form.checkValidity()) {
                    e.preventDefault()
                    e.stopPropagation()
                }

                form.classList.add('was-validated')
            }, false)
        })
    }

    const form = document.getElementById("productForm");
    const productName = document.getElementById("Productname");
    const errorMessage = document.getElementById("errorMessage");

    productName.addEventListener("input", function() {
        if (productName.value.length > 10) { //validasi input product 
            errorMessage.textContent = "Last name must not exceed 10 characters";
        } else if (/[#@{}]/.test(productName.value)) {
            errorMessage.textContent = "Name must not contain symbols";
        } else {
            errorMessage.textContent = "";
        }
    });

    form.addEventListener("submit", function(e) {
        if (productName.value.trim() === "") {
            e.preventDefault();
            errorMessage.textContent = "Product name cannot be empty";
        } else {
            errorMessage.textContent = "";
        }
    });

    )()

  </script>

  <script type="text/javascript">
    const btn_submit = document.querySelector('#btn_submit')
    btn_submit.addEventListener("click", (e) => {
        // console.log("masuk sini");

         e.preventDefault();
         
        // var radio_value = document.querySelector('input[name="flexRadioDefault"]:checked').value;
        // console.log(radio_value);

        var productName = document.getElementById("Productname").value;
        var productCategory = document.getElementById("categoryProduct").value;
        var productimage = document.getElementById("imageproduct").value; 
        var freshness = document.querySelector('input[name="flexRadioDefault"]:checked').value;
        var additionalDescription = document.getElementById("decs").value;
        var productPrice = document.getElementById("price").value;

        // Validasi input
        if (!productName || productCategory === "Choose" || !freshness || !additionalDescription || !productPrice) {
            console.log("Harus diisi semua");
            return;
        }

        // Membuat objek produk
        var product = {
            name: productName,
            category: productCategory,
            image: productimage,
            freshness: freshness,
            description: additionalDescription,
            price: productPrice
        };

        // Menambahkan produk ke dalam tabel
        TambahTable(product);

        function TambahTable(product) {
        var tableBody = document.getElementById("productTableBody");
        var row = tableBody.insertRow(-1);
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        var cell3 = row.insertCell(2);
        var cell4 = row.insertCell(3);
        var cell5 = row.insertCell(4);
        var cell6 = row.insertCell(5);
        var cell7 = row.insertCell(6);

        
        cell1.innerHTML = tableBody.rows.length - 1;
        cell2.innerHTML = product.name;
        cell3.innerHTML = product.category;
        cell4.innerHTML = product.image;
        cell5.innerHTML = product.freshness;
        cell6.innerHTML = product.description;
        cell7.innerHTML = product.price;
     }


    })
    
  </script>
</html>